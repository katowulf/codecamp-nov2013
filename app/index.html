<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Angular â™¥ Firebase | Step 1: Basic chat</title>

    <link rel="stylesheet" href="styles.css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>

    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="https://cdn.firebase.com/v0/firebase-simple-login.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.3.0/angularfire.min.js"></script>

</head>
<body ng-controller="myCtrl">

<h1>Step 1: Basic chat</h1>

<ul id="messages" ng-scroll-down="messages">
    <li ng-repeat="message in messages"><label class="name">{{message.name}}</label> {{message.body}}</li>
</ul>

<form ng-submit="name && body && addRow(name, body)">
    <input ng-model="name" type="text" placeholder="name" size="10">
    <input ng-model="body" type="text" placeholder="message" size="30" />
    <button type="submit">send</button>
</form>

<script>
    var app = angular.module('myApp', ['firebase']);
    app.controller('myCtrl', function($scope, angularFireCollection) {
        var fb = new Firebase('https://codecamp-nov2013.firebaseio.com/messages');
        $scope.messages = angularFireCollection(fb);
        $scope.addRow = function(name, body) {
            $scope.messages.add({name: name, body: body});
            $scope.body = null;
        };
    });
    app.directive('ngScrollDown', function() {
        return function(scope, el, attr) {
            scope.$watchCollection(attr.ngScrollDown, function() {
                el.scrollTop = el.scrollHeight;
            });
        }
    })
</script>

</body>
</html>
